<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="store.View.ExportPage"
             Title="ExportPage">

    <CollectionView ItemsSource="{Binding RaksWithSections}">
        <CollectionView.ItemTemplate>
            <DataTemplate>
                <StackLayout Padding="20">
                    <StackLayout Orientation="Horizontal" VerticalOptions="Center">
                        <Label Text="{Binding Key}" FontSize="24" FontAttributes="Bold" VerticalOptions="Center" />
                        <Button Text="All in One" 
                                BackgroundColor="{StaticResource teal}"
                                TextColor="{StaticResource White}"
                                WidthRequest="90"                            
                                Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.ExportAllInOne}" 
                                CommandParameter="{Binding Key}" 
                                VerticalOptions="Center" 
                                Margin="10,0,0,0" />
                        
                        <Button Text="OneByOne" 
                         BackgroundColor="{StaticResource teal}"
                         TextColor="{StaticResource White}"
                         WidthRequest="100"   
                         Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.ExportOneByOne}" 
                         CommandParameter="{Binding Key}" 
                         VerticalOptions="Center" 
                         Margin="10,0,0,0" />

                    </StackLayout>

                
                    <StackLayout>
                        <Label Text="Sections:" FontAttributes="Italic" />
                        <CollectionView ItemsSource="{Binding Value}">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <StackLayout Orientation="Horizontal" Padding="10">
                                        <Label Text="{Binding}" FontSize="20" VerticalOptions="Center" />
                                        <Button Text="TXT" 
                                                BackgroundColor="Transparent"
                                                TextColor="{StaticResource teal}"
                                                Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.ExporttxtCommand}" 
                                                CommandParameter="{Binding}" 
                                                VerticalOptions="Center" />
                                    </StackLayout>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </StackLayout>

                    <BoxView HeightRequest="2" BackgroundColor="{StaticResource teal}" Margin="0,5,0,5" />
                </StackLayout>
            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>
</ContentPage>